
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%; /* Light mode background */
    --foreground: 240 10% 3.9%; /* Light mode text */
    --card: 0 0% 100%; /* Light mode card background */
    --card-foreground: 240 10% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 3.9%;
    --primary: 258 84% 58%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 95%; /* Light mode secondary */
    --secondary-foreground: 240 10% 3.9%;
    --muted: 0 0% 95%; /* Light mode muted */
    --muted-foreground: 0 0% 45%;
    --accent: 0 0% 95%; /* Light mode accent */
    --accent-foreground: 240 10% 3.9%;
    --destructive: 0 89% 48%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 89%; /* Light mode border */
    --input: 0 0% 89%; /* Light mode input */
    --ring: 258 84% 58%; /* Ring to match primary accent */
    --radius: 1rem;
    
    --sidebar-background: 0 0% 96%; /* Light mode sidebar */
    --sidebar-foreground: 240 10% 3.9%;
    --sidebar-primary: 0 0% 95%;
    --sidebar-primary-foreground: 240 10% 3.9%;
    --sidebar-accent: 0 0% 90%;
    --sidebar-accent-foreground: 240 10% 3.9%;
    --sidebar-border: 0 0% 100% / 0.10;
    --sidebar-ring: 0 0% 100% / 0.12;

    --surface-card: #ffffff;
    --card-border-subtle: rgba(0,0,0,.10);

    /* Palette and KPI */
    --palette-1: #98CEF3;
    --palette-2: #B9E0FF;
    --palette-3: #D0E6FB;
    --palette-4: #E6D6FD;
    --palette-5: #E4C5FB;
    --palette-6: #D2ACFB;
    --kpi-color: var(--palette-1);

    /* Nav dividers */
    --nav-divider: rgba(2, 6, 23, .10);
    --nav-border:  rgba(2, 6, 23, .12);

    /* ---- Minimal calendar skin (dark) ---- */
    --cal-grid: #2a2a2f;         /* subtle grid line */
    --cal-bg: #0b0b0f;           /* page/card bg */
    --cal-muted: #8a8a92;        /* header text */
  }

  .dark {
    /* page/background tokens (keep as you prefer) */
    --background: 240 10% 3.9%;        /* page shell */
    --foreground: 0 0% 98%;

    /* üîë card/panel surfaces: set to #0c0c0c */
    --card: 0 0% 4.7%;
    --card-foreground: 0 0% 98%;

    /* popovers often read like cards; match unless you want different */
    --popover: 0 0% 4.7%;
    --popover-foreground: 0 0% 98%;
    
    --primary: 0 0% 12%; /* #1f1f1f */
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 10%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 7%;
    --muted-foreground: 0 0% 70%;
    --accent: 0 0% 12%; /* #1f1f1f */
    --accent-foreground: 0 0% 98%;
    --destructive: 0 89% 48%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 100% / 0.10;
    --input: 0 0% 14%;
    --ring: 0 0% 18%;
    --radius: 1rem;
    
    --sidebar-background: 0 0% 6%;
    --sidebar-foreground: 0 0% 98%;
    --sidebar-primary: 0 0% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 0 0% 10%;
    --sidebar-accent-foreground: 0 0% 98%;
    --sidebar-border: 0 0% 100% / 0.10;
    --sidebar-ring: 0 0% 100% / 0.12;
    --surface-card: #0c0c0c;
    --card-border-subtle: rgba(255,255,255,.10);

    /* Nav dividers */
    --nav-divider: rgba(255,255,255, .10);
    --nav-border:  rgba(255,255,255, .12);
  }
}

@layer base {
  html, body, #__next {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
  }
  
  html {
    height: 100%;
  }
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    min-height: 100vh;
    height: 100%;
    background-attachment: fixed;
    font-family: var(--font-inter);
    transition: background-color 0.3s ease, color 0.3s ease;
  }
}

@layer components {
  /* === GLOBAL CARD SHAPE RESET ============================================= */
  /* Single place to control card corner */
  :root { --card-radius: var(--radius); } /* you already define --radius */

  /* A ‚Äúuniversal card selector‚Äù ‚Äî everything that visually looks like a card   */
  /* Uses :where() to keep specificity *very* low, so it wins without !important */
  :where(
    /* our own */
    .bg-card, .surface-card, [data-card="true"], .panel, .card, .shadcn-card,
    /* common lib cards */
    .ant-card, .ant-card-bordered,                       /* Ant Design */
    .MuiCard-root, .MuiPaper-root.MuiCard-root,          /* MUI */
    .chakra-card,                                        /* Chakra */
    .mantine-Card-root,                                  /* Mantine */
    /* our dashboard/layout ‚Äúpanel‚Äù wrappers if any */
    section[data-surface="card"], article[data-surface="card"]
  ) {
    border-radius: var(--card-radius);
    /* clip contents so charts/tables respect corners */
    overflow: hidden; /* fallback for older browsers */
    overflow: clip;   /* modern, avoids creating stacking context */
    background-clip: padding-box; /* cleaner antialiasing on masks */
  }

  /* If a component tries to flatten corners, put them back */
  :where(
    .bg-card, .surface-card, [data-card="true"], .panel, .card, .shadcn-card,
    .ant-card, .MuiCard-root, .chakra-card, .mantine-Card-root
  ).rounded-none { border-radius: var(--card-radius); }

  /* Any card whose shape is applied to a *child* wrapper (e.g., table/charts) */
  :where(.bg-card, .surface-card, .card, .ant-card, .MuiCard-root) > :where(
    .card-header, .card-content, .card-footer, .ant-card-body,
    .MuiCardContent-root, .MuiCardHeader-root
  ) {
    border-radius: inherit;
  }

  /* Prevent inner ‚Äúmodules‚Äù from disabling clipping */
  :where(.bg-card, .surface-card, .card, .ant-card, .MuiCard-root) > :where(*) {
    /* only adjust if libraries set overflow-visible */
    overflow: initial;
  }

  /* Charts & canvases: ensure they obey card radius when placed directly inside */
  :where(.bg-card, .surface-card, .card, .ant-card, .MuiCard-root)
    :where(.recharts-wrapper, canvas, svg, .echarts-for-react) {
    border-radius: inherit;
    overflow: hidden;
    background-clip: padding-box;
  }

  /* Table cards: outer card clips; tables themselves keep square rows */
  :where(.bg-card, .surface-card, .card, .ant-card, .MuiCard-root) table {
    border-radius: 0;
  }

  /* Grid-list dashboards often render ‚Äúsquare by default‚Äù. Catch those items. */
  .grid > :where(.bg-card, .surface-card, .panel, .card, .ant-card, .MuiCard-root),
  .grid [data-card="true"] {
    border-radius: var(--card-radius);
    overflow: hidden;
  }

  /* === DARK MODE: FORCE CARD SURFACES TO #0c0c0c =========================== */
  /* universal card selector ‚Äî low specificity using :where() */
  .dark :where(
    /* our own / common aliases */
    .bg-card, .surface-card, [data-card="true"], .panel, .card, .shadcn-card,
    /* Ant Design */
    .ant-card, .ant-card-bordered,
    /* Material UI */
    .MuiCard-root, .MuiPaper-root.MuiCard-root,
    /* Chakra */
    .chakra-card,
    /* Mantine */
    .mantine-Card-root,
    /* generic ‚Äúcardy‚Äù sections used in dashboards */
    section[data-surface="card"], article[data-surface="card"]
  ) {
    background-color: #0c0c0c;               /* exact color */
    background: #0c0c0c;                     /* hard fallback */
  }

  /* Some libs style card body separately ‚Äî match it too */
  .dark :where(
    .ant-card-body,
    .MuiCardContent-root,
    .mantine-Card-section
  ) {
    background-color: #0c0c0c;
  }

  /* Dialogs/popovers that visually act as ‚Äúcards‚Äù */
  .dark :where(
    .ant-popover-inner, .ant-dropdown-menu, .ant-modal-content,
    .MuiPopover-paper, .MuiPaper-root.MuiPopover-paper,
    .chakra-popover__content, .mantine-Popover-dropdown
  ) {
    background-color: hsl(var(--popover)); /* we set this to #0c0c0c above */
  }
}


@layer utilities {
  .neon-glow {
    box-shadow: 0 0 60px 20px rgba(157, 78, 221, 0.65), 0 0 120px 40px rgba(80, 0, 255, 0.15);
  }

  .kpi-value {
    color: var(--kpi-color) !important;
  }
  
  .due-box {
    @apply inline-block px-2 py-0.5 rounded text-xs font-semibold;
  }

  .due-pulse {
      animation: pulse 1.5s infinite ease-in-out;
  }

  @keyframes pulse {
    0%, 100% {
      transform: scale(1);
      box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
    }
    50% {
      transform: scale(1.02);
      box-shadow: 0 0 5px 3px rgba(239, 68, 68, 0);
    }
  }

  /* Tag styles for contacts page */
  .tag-client { @apply bg-blue-500/20 text-blue-300 border-blue-500/50 text-xs px-2 py-0.5 rounded-full border; }
  .tag-prospect { @apply bg-purple-500/20 text-purple-300 border-purple-500/50 text-xs px-2 py-0.5 rounded-full border; }
  .tag-lead { @apply bg-yellow-500/20 text-yellow-300 border-yellow-500/50 text-xs px-2 py-0.5 rounded-full border; }
  .tag-referred { @apply bg-green-500/20 text-green-300 border-green-500/50 text-xs px-2 py-0.5 rounded-full border; }
  .tag-vip { @apply bg-pink-500/20 text-pink-300 border-pink-500/50 text-xs px-2 py-0.5 rounded-full border; }
  .tag-new { @apply bg-cyan-500/20 text-cyan-300 border-cyan-500/50 text-xs px-2 py-0.5 rounded-full border; }
  .tag-default { @apply bg-gray-500/20 text-gray-300 border-gray-500/50 text-xs px-2 py-0.5 rounded-full border; }

  /* Glow animations for compliance badges */
  @keyframes glow-trading {
    0%, 100% { box-shadow: 0 0 2px 0px #ef4444; }
    50% { box-shadow: 0 0 6px 2px #ef4444; }
  }
  @keyframes glow-anomaly {
    0%, 100% { box-shadow: 0 0 2px 0px #A259F7; }
    50% { box-shadow: 0 0 6px 2px #A259F7; }
  }
  @keyframes glow-activity {
    0%, 100% { box-shadow: 0 0 2px 0px #22c55e; }
    50% { box-shadow: 0 0 6px 2px #22c55e; }
  }
  .animate-glow-trading { animation: glow-trading 2s ease-in-out infinite; }
  .animate-glow-anomaly { animation: glow-anomaly 2.5s ease-in-out infinite; }
  .animate-glow-activity { animation: glow-activity 3s ease-in-out infinite; }

  .shadow-white-glow-soft { box-shadow: 0 1px 3px 0 rgba(255, 255, 255, 0.03); }
  .hover\:shadow-white-glow-hover:hover { box-shadow: 0 2px 8px 0 rgba(255, 255, 255, 0.06); }
  .details-no-marker::marker { display: none; content: ""; }
  .details-no-marker summary::-webkit-details-marker { display: none; }
  .no-scrollbar::-webkit-scrollbar { display: none; }
  .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
  /* Utility: fixed height for chart wrappers so Recharts can mount */
  .chart-card { height: 14rem; } /* ~ h-56 */
  @media (min-width: 1280px) {
    .chart-card { height: 16rem; } /* bump on xl screens */
  }

 /* ===== Invisible scrollbar ===== */
 .scroll-invisible { overflow-y: auto; -ms-overflow-style: none; scrollbar-width: none; }
 .scroll-invisible::-webkit-scrollbar { width: 0; height: 0; display: none; }
 
 /* ===== Reports two-pane sizing ===== */
 /* Base (mobile): auto height; stack vertically */
 :root { --report-pane-h: auto; }
 
 /* On xl, fill viewport minus header/controls (~180px). Tune if your header is taller/shorter. */
 @media (min-width: 1280px) {
   :root { --report-pane-h: calc(100vh - 180px); }
 }
 
 /* Apply to each pane (table card + AskMaven) */
 .report-pane { height: var(--report-pane-h); }
 
 /* Inside a pane, make the scrolling area fill remaining space below the card header */
 .report-scroll { height: calc(100% - 48px); } /* 48px ‚âà card header + padding */
}

/* Recharts (SVG) axis/label default textcolor stays neutral */
.recharts-text, .recharts-cartesian-axis-tick-value {
  fill: rgba(255,255,255,0.75);
}

.dark .recharts-text, .dark .recharts-cartesian-axis-tick-value {
  fill: rgba(255,255,255,0.75);
}
:root .recharts-text, :root .recharts-cartesian-axis-tick-value {
  fill: rgba(0,0,0,0.75);
}

/* ---------------------------------------------------------- */
/*  Topbar separator: match the faint divider used projectwide */
/* ---------------------------------------------------------- */
:root { --topbar-sep: rgba(2, 6, 23, .08); }                 /* light */
.dark { --topbar-sep: rgba(255,255,255,.08); }  /* dark = faint white */

/* Normalize ALL header variants to the same faint separator */
.topbar, header[role="banner"], .app-header, .site-header, .navbar, [data-topbar],
.sticky.top-0, .fixed.top-0 {
  border-bottom: 0 !important;
  box-shadow: none !important;
  outline: none !important;
  box-shadow: inset 0 -1px 0 var(--topbar-sep) !important;
  background: hsl(var(--background)) !important;
  color: hsl(var(--foreground)) !important;
}

.topbar::after, header[role="banner"]::after, .navbar::after, [data-topbar]::after {
  content: none !important;
}
.topbar.border, header[role="banner"].border, .navbar.border, [data-topbar].border {
  border-bottom: 1px solid var(--topbar-sep) !important;
}

/* -------------------- SIDEBAR (light + dark) -------------------- */
.sidebar {
  background: hsl(var(--background)) !important;
  color: hsl(var(--foreground)) !important;
  border-right: 1px solid var(--nav-border) !important;
  box-shadow: none !important;
  outline: none !important;
}
.dark .sidebar {
  background: #0b0b0b !important;
  color: rgba(255, 255, 255, 0.75) !important;
  border-right: 1px solid var(--nav-border) !important;
}
.sidebar hr,
.sidebar .divider,
.sidebar .divide-y > :not([hidden]) ~ :not([hidden]) {
  border: 0;
  border-top: 1px solid var(--nav-divider) !important;
  opacity: 1;
}

hr {
  border: 0;
  border-top: 1px solid var(--nav-divider) !important;
}

.dark .report-card,
[data-theme="dark"] .report-card {
  background-color: var(--surface-card) !important;
  border-color: var(--card-border-subtle) !important;
}

/* -------------------- SIDEBAR HOVER / ACTIVE (fix purple) -------------------- */
:root {
  --sidebar-hover-light: rgba(2, 6, 23, .04);
  --sidebar-active-light: rgba(2, 6, 23, .06);
}
.dark {
  --sidebar-hover: rgba(255,255,255,.04);
  --sidebar-active: rgba(255,255,255,.08);
}

.dark .sidebar a,
.dark .sidebar button,
.dark .sidebar [role="menuitem"] {
  background: transparent;
  background-image: none !important;
  color: rgba(255,255,255,.72);
  transition: background-color .12s ease, color .12s ease;
}

.dark .sidebar a:hover,
.dark .sidebar button:hover,
.dark .sidebar [role="menuitem"]:hover,
.dark .sidebar .group:hover,
.dark .sidebar [data-hover="true"] {
  background: var(--sidebar-hover) !important;
  color: rgba(255,255,255,.92) !important;
  background-image: none !important;
}

.dark .sidebar .active,
.dark .sidebar a[aria-current="page"],
.dark .sidebar [data-selected="true"],
.dark .sidebar [data-state="open"],
.dark .sidebar .group[data-state="open"],
.dark .sidebar .group[aria-expanded="true"] {
  background: var(--sidebar-active) !important;
  color: rgba(255,255,255,.96) !important;
  background-image: none !important;
}

.dark .sidebar [class*="bg-primary"],
.dark .sidebar [class*="bg-accent"],
.dark .sidebar [class*="bg-violet"],
.dark .sidebar [class*="bg-purple"] {
  background: var(--sidebar-active) !important;
  background-image: none !important;
}

:root .sidebar a:hover,
:root .sidebar button:hover,
:root .sidebar [role="menuitem"]:hover {
  background: var(--sidebar-hover-light) !important;
}

:root .sidebar .active,
:root .sidebar a[aria-current="page"],
:root .sidebar [data-selected="true"],
:root .sidebar [data-state="open"] {
  background: var(--sidebar-active-light) !important;
}
    
/* Hide any upload/drop cards on Reports pages only (no flash of content) */
[data-route="reports"] :where(
  .report-upload-trio,
  .report-upload-row,
  .report-dropzone,
  .dropzone-card,
  .file-drop-card,
  .upload-zone,
  [data-dropzone],
  [data-role="report-upload"]
){
  display: none !important;
}

/* === Invisible scrollbar utility (cross-browser) === */
.nav-scroll {
  overflow-y: auto;                  /* scrolling still works */
  overscroll-behavior: contain;      /* prevent page scroll while over nav */
  -webkit-overflow-scrolling: touch; /* smooth on iOS */
  -ms-overflow-style: none;          /* IE/Edge legacy */
  scrollbar-width: none;             /* Firefox */
}
.nav-scroll::-webkit-scrollbar {     /* Chrome/Safari/Edge */
  width: 0;
  height: 0;
}
.nav-scroll::-webkit-scrollbar-thumb,
.nav-scroll::-webkit-scrollbar-track {
  background: transparent;
}

/* If any global scrollbar styling exists, hard-disable it inside the sidebar */
aside.sidebar ::-webkit-scrollbar { width: 0 !important; height: 0 !important; }
aside.sidebar { scrollbar-width: none !important; }


/* Ensure any ‚Äúactive/selected‚Äù pills use the new accent */
.nav-item[aria-current="page"],
.nav-item[data-state="active"],
.nav-item[data-active="true"] {
  background: hsl(var(--accent)) !important;
  color: hsl(var(--accent-foreground));
}
    
/* === Chart palette (Light & Dark) === */
:root, .dark {
  /* HSL approximations of the provided HEX */
  --chart-1: 204 79% 77%;  /* #98CEF3 (Baby Blue Eyes) */
  --chart-2: 207 100% 86%; /* #B9E0FF (Diamond) */
  --chart-3: 209 84% 90%;  /* #D0E6FB (Water) */
  --chart-4: 265 91% 92%;  /* #E6D6FD (Pale Lavender) */
  --chart-5: 274 87% 88%;  /* #E4C5FB (Pale Lavender alt) */
  --chart-6: 269 91% 83%;  /* #D2ACFB (Mauve) */

  /* Optional hex aliases if you ever need them directly */
  --chart-1-hex: #98CEF3;
  --chart-2-hex: #B9E0FF;
  --chart-3-hex: #D0E6FB;
  --chart-4-hex: #E6D6FD;
  --chart-5-hex: #E4C5FB;
  --chart-6-hex: #D2ACFB;
}

/* === Global KPI palette (Light & Dark) ‚Äî place at END of globals.css === */
/* HSL triples so components can keep using hsl(var(--token)) */
:root, .dark {
  /* KPI base tokens (new) */
  --kpi-1: 178 93% 39%; /* #07BEB8 */
  --kpi-2: 178 58% 52%; /* #3DCCC7 */
  --kpi-3: 179 59% 63%; /* #68D8D6 */
  --kpi-4: 184 72% 77%; /* #9CEAEF */
  --kpi-5: 174 100% 88%; /* #C4FFF9 */

  /* Alias existing chart tokens used by KPI widgets */
  --chart-1: var(--kpi-1);
  --chart-2: var(--kpi-2);
  --chart-3: var(--kpi-3);
  --chart-4: var(--kpi-4);
  --chart-5: var(--kpi-5);
}
  


    
